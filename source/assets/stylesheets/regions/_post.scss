/* =============================================================================
// Post styles
// ========================================================================== */

@import "../core/*";
@import "../atoms/heading";
@import "../atoms/text";
@import "../atoms/list";
@import "../molecules/cover";
@import "../organisms/gallery";

/* Base
// -------------------------------------------------------------------------- */

.post {
    display: block;
}

/* Submodules
// -------------------------------------------------------------------------- */

.post-cover { @extend .cover; }

.post-header {
    @extend .l-wrapper;
    @extend .l-wrapper.narrow;
    margin-top: 2em;
    margin-bottom: 2em;

    .post-cover + & { margin-top: 0; }
}

.post-content {
    $margin: 1em;
    padding-bottom: $gutter-outside;

    * + * { margin-top: 1em; }

    p {
        margin-left: auto;
        margin-right: auto;
        max-width: $layout-w--narrow;

        &:first-child, &:first-of-type { @extend .lead; }

        &:last-child { margin-bottom: 0; }
    }

    > ul {
        @extend .gallery;
        @include rem(margin-top, fs(8));
        @include rem(margin-bottom, fs(8));

        &.small { @extend .gallery.small; }
        &.large { @extend .gallery.large; }
    }

    li {
        @extend .gallery-item;

        ul.small & { @extend %gallery-item--small; }
        ul.large & { @extend %gallery-item--large; }
    }

    > img {
        @include rem(margin-top, fs(8));
        @include rem(margin-bottom, fs(8));

        & + ul, & + .gallery { margin-top: $gallery-gutter; }
    }
}

.post-meta {
    @extend %font-accent;
    @include font-scale(2);
    @include border(top bottom);
    display: block;
    padding: 1em 0;
    margin: 1em 0;
    text-transform: uppercase;
    color: theme(text tertiary);

    &.top {
        @include rem(margin-bottom, fs(6));
        border-top: none;
    }

    &.sidebar {
        @include respond-to('large') {
            $w: 200px;
            @include rem(width, $w);
            @include rem(margin-right, -($w + $gutter));
            float: right;
            border-bottom: none;
        }
    }

    // @include respond-to('small') { display: flex; }
}

.post-date {
    @extend .date;
    display: block;

    @include respond-to('small') {
        @include border(right);
        display: inline;
        margin-right: 0.8em;
        padding-right: 0.8em;
    }

    .post-meta.sidebar & {
        @include respond-to('large') {
            display: block;
            margin-right: 0;
            padding-right: 0;
            border-right: none;
        }
    }
}

.post-tags {
    @extend .tags;
    display: block;
    margin: 0.5em 0 0;

    @include respond-to('small') {
        display: inline;
        // margin-left: 1em;
        margin-top: 0.2em;
    }

    &.right {
        @include respond-to('small') {
            display: inline-block;
            // @include flex(1);
            // @include align-self(flex-end);
            margin-top: -0.2em;
            margin-left: 1em;
            float: right;
        }
    }

    .post-meta.sidebar & {
        @include respond-to('large') {
            display: block;
            margin: 0.5em 0 0;
        }
    }
}

.post-feature_image {
    margin: 1em 0;
    width: 100%;
}
