<% wrap_layout :layout do %>
<article class="post">
    <section class="panel top">
        <img class="post-cover" src="<%= asset_url(current_page.url + current_page.data.cover) %>" alt="<%= current_page.data.title %>">

        <!-- cover image and info -->
        <header class="post-header">
            <div class="post-meta top">
                <time class="post-date"><%= current_page.date.strftime('%Y') %></time>
                <span><%= current_page.data.width %> &times; <%= current_page.data.height %>, <%= current_page.data.format %></span>
                <ul class="post-tags right">
                    <% current_page.data.tags.each do |tag| %>
                    <li><a class="tag" href="#"><%= tag %></a></li>
                    <% end %>
                </ul>
            </div>
            <h1 class="post-title"><%= current_page.data.title %></h1>
        </header><!-- /.post-header -->

        <!-- writeup -->
        <div class="post-content l-wrapper">
            <%= yield %>
        </div><!-- /.post-content -->

    </section><!-- /.panel -->

    <!-- Editions -->

    <!-- jump nav -->
    <% if current_page.data.editions.present? %>
    <section class="panel has-jump">
        <h2 class="panel-slug">Available Editions</h2>

        <% if current_page.data.editions.length > 1 %>
        <nav class="jump_nav js-sticky">
            <ul>
                <% current_page.data.editions.each_with_index do |edition, i| %>
                    <% if edition.name.present? %>
                    <li class="jump_nav-item">
                        <a class="jump_nav-button js-highlight<% if i == 0 %> is-active<% end %>" href="#edition-<%= edition.name %>" data-initial="<%= edition.name[0] %>"><span class="button-label"><%= edition.name %></span></a>
                    </li>
                    <% end %>
                <% end %>
            </ul>
        </nav><!-- /.jump_nav -->
        <% end %>

        <!-- edition cards -->
        <div class="feed l-wrapper">
            <% current_page.data.editions.each do |edition| %>
            <figure class="card horizontal large feed-item" id="edition-<%= edition.name %>">
                <img class="card-figure" src="<%= asset_url current_page.url + edition.image %>" alt="<%= edition.name %> edition">
                <figcaption class="card-content">
                    <h2 class="cappa"><strong><%= edition.name.titleize %></strong> <%= edition.type.titleize %> Print</h2>
                    <dl class="card-stats">
                        <dt>Print Size</dt>
                        <dd><%= edition.height %>" &times; <%= edition.width %>"</dd>
                        <dt>Paper Size</dt>
                        <dd><%= edition.height + (edition.border * 2) %>" &times; <%= edition.width + (edition.border * 2) %>"</dd>
                        <dt>Edition</dt>
                        <dd><% if edition.limit.present? %>edition.limit<% else %>Open<% end %></dd>
                    </dl>
                    <p class="card-caption">Printed at Archival Arts in Baltimore on heavy, textured, acid-free Hahnemuhle cotton rag paper, using archival pigment-based inks. Individually signed and numbered.</p>
                    <a class="button purchase" href=""><span class="button-price"><sup>$</sup><%= edition.price %></span> Buy this print</a>
                </figcaption>
            </figure><!-- /.card.feed-item -->
            <% end %>
        </div><!-- /.feed -->
    </section><!-- /.panel -->
    <% end %>
</article>
<% end %>
